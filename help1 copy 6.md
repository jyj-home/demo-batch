åœ¨ **NestJS æœ€æ–°ç‰ˆæœ¬** é‡Œï¼Œ**Jest ä»ç„¶æ˜¯é»˜è®¤çš„å•å…ƒæµ‹è¯•æ¡†æ¶**ï¼Œä½† **Vitest** ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œå…·ä½“é€‰å“ªä¸ªè¦çœ‹ä½ çš„éœ€æ±‚ï¼š

## **Jest vs. Vitest åœ¨ NestJS ä¸­çš„å¯¹æ¯”**
| ç‰¹æ€§          | Jest | Vitest |
|--------------|------|--------|
| **å®˜æ–¹æ”¯æŒ** | âœ… é»˜è®¤æµ‹è¯•æ¡†æ¶ï¼ŒNestJS CLI è‡ªåŠ¨ç”Ÿæˆ Jest é…ç½® | âŒ éœ€è¦æ‰‹åŠ¨é…ç½® |
| **æ€§èƒ½** | â³ æ¯”è¾ƒæ…¢ï¼Œä¸»è¦å›  JSDOM å’Œè¾ƒå¤§çš„è¿è¡Œç¯å¢ƒ | âš¡ æ›´å¿«ï¼Œä½¿ç”¨ V8 åŸç”Ÿç¯å¢ƒ |
| **ç”Ÿæ€** | ğŸŒ æˆç†Ÿï¼Œæ’ä»¶/æ–‡æ¡£/ç¤ºä¾‹å¤š | ğŸš€ è½»é‡ä½†ç”Ÿæ€ä»åœ¨å¢é•¿ |
| **ESM æ”¯æŒ** | âš ï¸ éœ€è¦æ‰‹åŠ¨é…ç½® | âœ… åŸç”Ÿæ”¯æŒ |
| **TypeScript æ”¯æŒ** | âœ… é»˜è®¤æ”¯æŒ | âœ… æ›´å¿«çš„ TypeScript æ”¯æŒ |
| **å¿«ç…§æµ‹è¯•** | âœ… å†…ç½® | âœ… å†…ç½® |
| **Mock æ”¯æŒ** | âœ… å¼ºå¤§ï¼Œè‡ªåŠ¨ Mock | âœ… ä½†éœ€è¦æ‰‹åŠ¨ Mock |

## **é€‰å‹å»ºè®®**
- **ç»§ç»­ç”¨ Jest**ï¼šNestJS å†…ç½®æ”¯æŒ Jestï¼Œå¼€ç®±å³ç”¨ï¼Œç¤¾åŒºæˆç†Ÿï¼ŒMock èƒ½åŠ›å¼ºã€‚
- **ç”¨ Vitest**ï¼š
  - ä½ æƒ³è¦æ›´å¿«çš„æµ‹è¯•è¿è¡Œé€Ÿåº¦ã€‚
  - ä½ çš„é¡¹ç›®åŸºäº ESM æˆ– Viteï¼Œéœ€è¦æ›´å¥½çš„å…¼å®¹æ€§ã€‚
  - ä½ ä¸ä»‹æ„æ‰‹åŠ¨é…ç½®æµ‹è¯•ç¯å¢ƒã€‚

## **å¦‚ä½•åˆ‡æ¢åˆ° Vitest**
å¦‚æœä½ æƒ³åœ¨ NestJS ä¸­ç”¨ **Vitest**ï¼Œå¯ä»¥è¿™æ ·åšï¼š

### **1. å®‰è£…ä¾èµ–**
```sh
npm remove jest @types/jest ts-jest
npm install -D vitest @vitest/ui
```

### **2. é…ç½® `vitest.config.ts`**
```ts
import { defineConfig } from 'vitest/config';

export default defineConfig({
  test: {
    globals: true,
    environment: 'node', // NestJS ä¸»è¦è¿è¡Œåœ¨ Node.js
  },
});
```

### **3. ä¿®æ”¹ `package.json` è„šæœ¬**
```json
"scripts": {
  "test": "vitest",
  "test:watch": "vitest --watch"
}
```

### **4. è¿è¡Œæµ‹è¯•**
```sh
npm run test
```

## **æ€»ç»“**
- **å¦‚æœä½ ç”¨çš„æ˜¯ NestJS é»˜è®¤ç¯å¢ƒ** â†’ **Jest** æ›´åˆé€‚ã€‚
- **å¦‚æœä½ è¿½æ±‚æ›´å¿«çš„æµ‹è¯•** â†’ **Vitest** å¯èƒ½æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œä½†éœ€è¦æ‰‹åŠ¨é…ç½®ã€‚

å¦‚æœä½ çš„é¡¹ç›®å·²ç»ç”¨äº† Jestï¼Œå»ºè®® **ç»§ç»­ç”¨ Jest**ï¼Œé™¤éä½ æœ‰æ˜ç¡®çš„ç†ç”±è¿ç§»åˆ° Vitestã€‚