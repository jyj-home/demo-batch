æ˜¯çš„ï¼Œåœ¨ **Vitest** ä¸­ï¼Œä½ å¯ä»¥**æ’é™¤ Vue æ¨¡æ¿ (`template`) ä»£ç çš„è¦†ç›–ç‡è®¡ç®—**ï¼Œåªç»Ÿè®¡ **TypeScript (`<script setup>`) é€»è¾‘ä»£ç **ã€‚  

---

### **å¦‚ä½•æ’é™¤ Vue æ¨¡æ¿ (`template`) ä»£ç çš„è¦†ç›–ç‡ï¼Ÿ**

Vitest ä½¿ç”¨ `c8` æˆ– `v8` è¿›è¡Œè¦†ç›–ç‡ç»Ÿè®¡ï¼Œè€Œ **Vue æ¨¡æ¿ä»£ç åœ¨ç¼–è¯‘åä¼šè½¬æ¢æˆ `render` å‡½æ•°**ï¼Œé»˜è®¤ä¹Ÿä¼šç®—å…¥è¦†ç›–ç‡ã€‚å› æ­¤ï¼Œä½ å¯ä»¥**é€šè¿‡ `c8` çš„ `exclude` è§„åˆ™ï¼Œå¿½ç•¥ Vue ç»„ä»¶çš„æ¨¡æ¿éƒ¨åˆ†**ã€‚

---

### **æ–¹æ³• 1ï¼šä½¿ç”¨ `c8` + `exclude` è§„åˆ™ï¼ˆæ¨èï¼‰**
**æ­¥éª¤ï¼š**
1. **å®‰è£… `c8`ï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰**
   ```sh
   npm install -D c8
   ```

2. **é…ç½® `vitest.config.ts`**
   ```ts
   import { defineConfig } from 'vitest/config';

   export default defineConfig({
     test: {
       coverage: {
         provider: 'c8', // ä½¿ç”¨ c8 ä½œä¸ºè¦†ç›–ç‡å·¥å…·
         reporter: ['text', 'lcov', 'html'],
         exclude: [
           'src/**/*.vue' // å¿½ç•¥ Vue ç»„ä»¶æ–‡ä»¶ï¼Œé¿å…ç»Ÿè®¡ template éƒ¨åˆ†
         ],
         include: [
           'src/**/*.ts', // åªç»Ÿè®¡ TypeScript é€»è¾‘ä»£ç 
           'src/**/*.js'
         ],
       },
     },
   });
   ```

3. **è¿è¡Œæµ‹è¯•è¦†ç›–ç‡**
   ```sh
   npx vitest --coverage
   ```

ğŸ“Œ **è§£é‡Šï¼š**  
- `exclude: ['src/**/*.vue']`ï¼šæ’é™¤æ‰€æœ‰ Vue ç»„ä»¶æ–‡ä»¶ï¼Œä¸ç»Ÿè®¡æ¨¡æ¿ä»£ç çš„è¦†ç›–ç‡ã€‚  
- `include: ['src/**/*.ts', 'src/**/*.js']`ï¼šåªç»Ÿè®¡ TypeScript å’Œ JavaScript ä»£ç ã€‚  
- è¿™ç§æ–¹å¼ä¼š**å®Œå…¨å¿½ç•¥ Vue ç»„ä»¶çš„è¦†ç›–ç‡**ï¼Œé€‚ç”¨äºåªå…³å¿ƒ TypeScript é€»è¾‘ä»£ç çš„æƒ…å†µã€‚

---

### **æ–¹æ³• 2ï¼šåªç»Ÿè®¡ `<script>` ä»£ç ï¼Œæ’é™¤ `<template>`**
å¦‚æœä½ ä»æƒ³ç»Ÿè®¡ **Vue ç»„ä»¶çš„ `<script setup>` ä»£ç **ï¼Œä½†**æ’é™¤ `<template>` ä»£ç **ï¼Œä½ éœ€è¦ä¸€ä¸ªæ›´ç²¾ç»†çš„æ–¹å¼ã€‚

#### **æ­¥éª¤ï¼š**
1. **é…ç½® `vitest.config.ts`**
   ```ts
   import { defineConfig } from 'vitest/config';

   export default defineConfig({
     test: {
       coverage: {
         provider: 'c8',
         reporter: ['text', 'lcov', 'html'],
         exclude: [
           '**/node_modules/**',
           '**/dist/**',
         ],
         all: true, // ç»Ÿè®¡æ‰€æœ‰æ–‡ä»¶
         extension: ['.ts', '.js', '.vue'], // ç¡®ä¿ Vue æ–‡ä»¶çš„ `<script>` ä»£ç ä¹Ÿè¢«ç»Ÿè®¡
         excludeAfterRemap: true, // é¿å…æ¨¡æ¿ä»£ç å½±å“è¦†ç›–ç‡
       },
     },
   });
   ```

2. **è¿è¡Œæµ‹è¯•**
   ```sh
   npx vitest --coverage
   ```

ğŸ“Œ **è§£é‡Šï¼š**
- `extension: ['.ts', '.js', '.vue']` è®© c8 è§£æ Vue ç»„ä»¶çš„ **`<script setup>` ä»£ç **ï¼Œä½†ä¸ä¼šç»Ÿè®¡ `<template>` ä»£ç çš„å½±å“ã€‚  
- `excludeAfterRemap: true` é¿å… Vue **æ¨¡æ¿ç¼–è¯‘åçš„ `render` å‡½æ•°** å½±å“è¦†ç›–ç‡ç»Ÿè®¡ã€‚  

**è¿™ç§æ–¹å¼é€‚ç”¨äº**ï¼š  
âœ… **ä»ç„¶ç»Ÿè®¡ `<script setup>` ä»£ç ï¼Œä½†å¿½ç•¥ `<template>` ä»£ç **ã€‚

---

### **æ–¹æ³• 3ï¼šä½¿ç”¨ `v8`ï¼ˆé€‚ç”¨äºå°å‹é¡¹ç›®ï¼‰**
å¦‚æœä½ ç”¨ `v8` è€Œä¸æ˜¯ `c8`ï¼Œå¯ä»¥é€šè¿‡ `exclude` è§„åˆ™æ’é™¤ Vue æ¨¡æ¿ï¼š

```ts
import { defineConfig } from 'vitest/config';

export default defineConfig({
  test: {
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html'],
      exclude: ['src/**/*.vue'], // æ’é™¤ Vue ç»„ä»¶ï¼Œé¿å…ç»Ÿè®¡æ¨¡æ¿
    },
  },
});
```

ä½† **`v8` ä¸å¦‚ `c8` çµæ´»ï¼Œæ— æ³•ç²¾ç¡®æ§åˆ¶** ä»…æ’é™¤ `<template>`ï¼Œå› æ­¤**æ¨è `c8` æ–¹æ¡ˆ**ã€‚

---

### **æœ€ç»ˆç»“è®º**
| æ–¹æ¡ˆ | ç»Ÿè®¡ `<script>` ä»£ç  | å¿½ç•¥ `<template>` ä»£ç  | é€‚ç”¨åœºæ™¯ |
|------|----------------|----------------|------------------|
| **æ–¹æ³• 1ï¼šc8 + `exclude: ['src/**/*.vue']`** | âŒ ä¸ç»Ÿè®¡ Vue ç»„ä»¶ | âœ… å¿½ç•¥ `<template>` | åªå…³å¿ƒ TypeScript ä»£ç ï¼Œä¸å…³å¿ƒ Vue ç»„ä»¶ |
| **æ–¹æ³• 2ï¼šc8 + `extension: ['.ts', '.js', '.vue']`** | âœ… ç»Ÿè®¡ `<script setup>` | âœ… å¿½ç•¥ `<template>` | ç»Ÿè®¡ Vue é€»è¾‘ä»£ç ï¼Œä½†ä¸å½±å“æ¨¡æ¿ |
| **æ–¹æ³• 3ï¼šv8 + `exclude: ['src/**/*.vue']`** | âŒ ä¸ç»Ÿè®¡ Vue ç»„ä»¶ | âœ… å¿½ç•¥ `<template>` | é€‚ç”¨äºå°å‹é¡¹ç›®ï¼Œçµæ´»åº¦ä½ |

ğŸš€ **æ¨èæ–¹æ¡ˆï¼šæ–¹æ³• 2**  
ğŸ‘‰ **æ—¢èƒ½ç»Ÿè®¡ Vue `<script>` ä»£ç ï¼Œåˆèƒ½æ’é™¤ `<template>` ä»£ç ï¼Œä¿æŒè¦†ç›–ç‡ç²¾å‡†ï¼**